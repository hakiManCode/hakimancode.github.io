<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Developer Cutscenes</title>
<style>
  /* ---------- General Styles ---------- */
  body {
    background: #0f1724;
    color: #e6eef8;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px;
    transition: background 0.1s ease;
  }
  h1 { margin-bottom: 24px; }

  button {
    margin: 8px;
    padding: 12px 24px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    background: #7ee7ff33;
    color: #fff;
  }
  #rarity-display {
    margin-top: 20px;
    font-size: 24px;
    font-weight: bold;
  }
  #chance-display {
    font-size: 16px;
    color: #b9c3d3;
    margin-top: 4px;
  }

  /* ---------- Screen Effect ---------- */
  #screen-effect {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 2000;
    opacity: 0;
    transition: opacity 0.6s ease-out;
  }
  .effect-common { background: rgba(128,128,128,0.1); }
  .effect-uncommon { background: rgba(0,255,0,0.1); }
  .effect-rare { background: rgba(0,128,255,0.15); }
  .effect-epic { background: rgba(128,0,255,0.2); }
  .effect-ultrarare { background: rgba(255,0,0,0.2); }
  .effect-legendary { background: rgba(255,165,0,0.2); }
  .effect-mythic {
    background: conic-gradient(from 0deg, red,orange,yellow,green,blue,indigo,violet,red);
    animation: rainbowFlash 1.2s linear infinite;
  }
  .effect-thunderous {
    background: rgba(255,255,255,0.25);
  }
  @keyframes rainbowFlash {
    0% { filter: blur(2px) brightness(1); }
    50% { filter: blur(4px) brightness(1.3); }
    100% { filter: blur(2px) brightness(1); }
  }

  /* ---------- Particles ---------- */
  #particle-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1500;
    overflow: hidden;
  }
  .particle {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    opacity: 0.9;
    animation: floatUp 1.2s ease-out forwards;
  }
  @keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    80% { opacity: 0.8; }
    100% { transform: translateY(-120px) scale(0.5); opacity: 0; }
  }
</style>
</head>
<body>

<h1>Developer Cutscenes</h1>

<div id="buttons-container"></div>

<div id="rarity-display">???</div>
<div id="chance-display"></div>

<!-- Screen Effect Overlay -->
<div id="screen-effect"></div>

<!-- Particle Container -->
<div id="particle-container"></div>

<script>
const rarities = [
  { name: "Common", color: "gray", chance: 2 },
  { name: "Uncommon", color: "green", chance: 4 },
  { name: "Rare", color: "blue", chance: 16 },
  { name: "Epic", color: "purple", chance: 64 },
  { name: "Ultra Rare", color: "red", chance: 512 },
  { name: "Legendary", color: "orange", chance: 1024 },
  { name: "Mythic", color: "yellow", chance: 10000 },
  { name: "Thunderous", color: "cyan", chance: 100000 },
];

// ---------- Effects ----------
function triggerScreenEffect(rarity) {
  const screen = document.getElementById("screen-effect");
  screen.className = "";
  void screen.offsetWidth; // force reflow

  let cls = "effect-" + rarity.name.toLowerCase().replace(" ", "");
  screen.classList.add(cls);

  // Thunderous lightning strike
  if (rarity.name === "Thunderous") {
    lightningStrike();
  }

  screen.style.opacity = "1";
  setTimeout(() => { screen.style.opacity = "0"; }, 300);

  if (rarity.name === "Thunderous") shakeWindow();
}

function lightningStrike() {
  // flash background cyan briefly
  const original = document.body.style.background;
  document.body.style.background = "cyan";
  setTimeout(() => {
    document.body.style.background = original;
  }, 100); // very brief flash
}

function shakeWindow() {
  let start = 0.75; // initial strength
  const duration = 750;
  const interval = 16;
  const startTime = Date.now();

  const shake = setInterval(() => {
    const elapsed = Date.now() - startTime;
    const progress = elapsed / duration;
    const strength = start * (1 - progress);
    if (progress >= 1) {
      document.body.style.transform = "";
      clearInterval(shake);
      return;
    }
    const x = (Math.random() - 0.5) * 20 * strength;
    const y = (Math.random() - 0.5) * 20 * strength;
    document.body.style.transform = `translate(${x}px, ${y}px)`;
  }, interval);
}

function spawnParticles(rarity) {
  if (!["Epic","Ultra Rare","Legendary","Mythic","Thunderous"].includes(rarity.name)) return;
  const container = document.getElementById("particle-container");
  for (let i = 0; i < 30; i++) {
    const p = document.createElement("div");
    p.className = "particle";
    p.style.left = Math.random() * window.innerWidth + "px";
    p.style.top = Math.random() * window.innerHeight + "px";
    p.style.backgroundColor = rarity.color;
    container.appendChild(p);
    setTimeout(() => p.remove(), 1200);
  }
}

// ---------- UI ----------
const display = document.getElementById("rarity-display");
const chanceDisplay = document.getElementById("chance-display");
const buttonsContainer = document.getElementById("buttons-container");

rarities.forEach(r => {
  const btn = document.createElement("button");
  btn.textContent = r.name;
  btn.onclick = () => {
    display.textContent = r.name === "Thunderous" ? "Thunderous" : r.name;
    chanceDisplay.textContent = "1 in " + r.chance;
    triggerScreenEffect(r);
    spawnParticles(r);
  };
  buttonsContainer.appendChild(btn);
});
</script>

</body>
</html>
