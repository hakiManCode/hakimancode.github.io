<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Developer Cutscenes</title>
<style>
/* ... (Existing CSS) */
  body {
    background: #0f1724;
    color: #e6eef8;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px;
    transition: background 0.1s ease;
  }
  h1 { margin-bottom: 24px; }
  button {
    margin: 8px;
    padding: 12px 24px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    background: #7ee7ff33;
    color: #fff;
  }
  #rarity-display { margin-top: 20px; font-size: 24px; font-weight: bold; }
  #chance-display { font-size: 16px; color: #b9c3d3; margin-top: 4px; }

  #screen-effect {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 2000;
    opacity: 0;
    transition: opacity 0.6s ease-out;
  }
  .effect-common { background: rgba(128,128,128,0.1); }
  .effect-uncommon { background: rgba(0,255,0,0.1); }
  .effect-rare { background: rgba(0,128,255,0.15); }
  .effect-epic { background: rgba(128,0,255,0.2); }
  .effect-ultrarare { background: rgba(255,0,0,0.2); }
  .effect-legendary { background: rgba(255,165,0,0.2); }
  .effect-mythic {
    background: conic-gradient(from 0deg, red,orange,yellow,green,blue,indigo,violet,red);
    animation: rainbowFlash 1.2s linear infinite;
  }
  .effect-thunderous { background: rgba(0,255,255,0.25); } /* ADDED: Thunderous effect style */
  @keyframes rainbowFlash {
    0% { filter: blur(2px) brightness(1); }
    50% { filter: blur(4px) brightness(1.3); }
    100% { filter: blur(2px) brightness(1); }
  }

  #particle-container {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1500;
    overflow: hidden;
  }
  .particle {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    opacity: 0.9;
    animation: floatUp 1.2s ease-out forwards;
  }
  @keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    80% { opacity: 0.8; }
    100% { transform: translateY(-120px) scale(0.5); opacity: 0; }
  }

  /* ---------- Luminous Cutscene ---------- */
  #luminous-overlay {
    position: fixed;
    inset: 0;
    background: black;
    z-index: 10000;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    animation: fadeIn 1s ease forwards;
  }
  .luminous-gradient {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 50%;
    background: linear-gradient(to top, rgb(180, 180, 180), black);
  }
  .luminous-title {
    font-family: "Roboto Mono", monospace;
    font-size: 3rem;
    color: white;
    z-index: 10001;
    text-shadow: 0 0 15px white, 0 0 25px cyan;
    animation: glowPulse 2s infinite alternate;
  }
  #luminous-particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
  }
  .luminous-particle {
    position: absolute;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: white;
    box-shadow: 0 0 8px cyan;
    animation: floatUpLuminous 10s linear forwards; 
  }
  
  @keyframes floatUpLuminous {
    0% { transform: translateY(0) scale(1); opacity: 1; } 
    80% { opacity: 0.8; }
    100% { transform: translateY(-110vh) scale(0.5); opacity: 0; } 
  }

  @keyframes glowPulse {
    from { text-shadow: 0 0 10px white, 0 0 20px cyan; }
    to   { text-shadow: 0 0 25px cyan, 0 0 40px white; }
  }
  #luminous-overlay.fade-white {
    background: white !important;
    transition: background 1s ease; 
  }

  /* ---------- Abyssal Cutscene ---------- */
  #abyssal-overlay {
    position: fixed;
    inset: 0;
    background: #000717; /* Very dark blue for deep ocean */
    z-index: 10000;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    animation: fadeIn 1s ease forwards;
  }

  .abyssal-gradient {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 50%;
    /* Dark blue to ultra-dark blue, simulating ocean depth */
    background: linear-gradient(to top, #003c78, #000717);
  }

  .abyssal-title {
    font-family: "Roboto Mono", monospace;
    font-size: 3rem;
    color: #a8dfff; /* Light blue/cyan */
    z-index: 10001;
    text-shadow: 0 0 15px #a8dfff, 0 0 25px #00ffff; /* Light blue/cyan glow */
    animation: abyssalGlowPulse 2s infinite alternate;
  }

  @keyframes abyssalGlowPulse {
    from { text-shadow: 0 0 10px #a8dfff, 0 0 20px #00ffff; }
    to   { text-shadow: 0 0 25px #00ffff, 0 0 40px #a8dfff; }
  }

  #abyssal-particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
  }

  .abyssal-particle {
    position: absolute;
    width: 8px; /* Slightly larger particles (bubbles) */
    height: 8px;
    border-radius: 50%;
    background: #00ffff; /* Cyan color */
    box-shadow: 0 0 8px #00ffff;
    /* Use the new animation with drift */
    animation: floatUpAbyssal 10.5s linear forwards;
  }

  /* Abyssal specific float up animation with drift */
  @keyframes floatUpAbyssal {
    0% { transform: translate(0, 0) scale(1); opacity: 1; }
    50% { transform: translate(var(--drift-x), -55vh) scale(0.7); opacity: 0.9; }
    100% { transform: translate(var(--drift-x), -110vh) scale(0.4); opacity: 0; }
  }

  #abyssal-overlay.fade-blue {
    background: #000f28 !important; /* Deep blue fade */
    transition: background 1s ease;
  }
  
  /* ---------- Apollo Cutscene ---------- */
  #apollo-overlay {
    position: fixed;
    inset: 0;
    background: #330000; /* Dark red/black for volcanic feel */
    z-index: 10000;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    animation: fadeIn 1s ease forwards;
  }

  .apollo-gradient {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 50%;
    /* Red to yellow fade, like a furnace */
    background: linear-gradient(to top, #ff4500, #330000);
  }

  .apollo-title {
    font-family: "Roboto Mono", monospace;
    font-size: 3rem;
    color: #ffd700; /* Gold */
    z-index: 10001;
    text-shadow: 0 0 15px #ff4500, 0 0 25px #ffd700; /* Fiery glow */
    animation: apolloGlowPulse 2s infinite alternate;
  }

  @keyframes apolloGlowPulse {
    from { text-shadow: 0 0 10px #ff4500, 0 0 20px #ffd700; }
    to   { text-shadow: 0 0 25px #ffd700, 0 0 40px #ff4500; }
  }

  #apollo-particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
  }

  .apollo-particle {
    position: absolute;
    width: 4px; /* Smaller, faster embers */
    height: 4px;
    border-radius: 50%;
    background: #ff8c00; /* Dark orange */
    box-shadow: 0 0 5px #ff4500;
    /* Faster ascent, less float */
    animation: floatUpApollo 6s linear forwards;
  }

  /* Fast, vertical, slightly erratic movement like flames/embers */
  @keyframes floatUpApollo {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-110vh) scale(0.2); opacity: 0; }
  }

  #apollo-overlay.fade-orange {
    background: #ff8c00 !important; /* Deep orange fade */
    transition: background 1s ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }
</style>
</head>
<body>

<h1>Developer Cutscenes</h1>
<div id="buttons-container"></div>
<div id="rarity-display">???</div>
<div id="chance-display"></div>

<div id="screen-effect"></div>
<div id="particle-container"></div>

<script>
// ---------- RARITIES (Updated) ----------
const rarities = [
  { name: "Common", color: "gray", chance: 2 },
  { name: "Uncommon", color: "green", chance: 4 },
  { name: "Rare", color: "blue", chance: 16 },
  { name: "Epic", color: "purple", chance: 64 },
  { name: "Ultra Rare", color: "red", chance: 512 },
  { name: "Legendary", color: "orange", chance: 1024 },
  { name: "Mythic", color: "yellow", chance: 10000 },
  { name: "Thunderous", color: "cyan", chance: 50000 }, // ADDED: Thunderous
  { name: "Luminous", color: "#fffacd", chance: 125000 },
  { name: "Abyssal", color: "#00bfff", chance: 200000 },
  { name: "Apollo", color: "#ff4500", chance: 250000 },
];

// ---------- UTILITY ----------
function randInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }

// ---------- Effects (Updated) ----------

function lightningStrike() {
  const original = document.body.style.background;
  document.body.style.background = "cyan";
  setTimeout(() => {
    document.body.style.background = original;
  }, 100);
}

function shakeWindow() {
  let start = 0.75;
  const duration = 750;
  const startTime = Date.now();
  const shake = setInterval(() => {
    const elapsed = Date.now() - startTime;
    const progress = elapsed / duration;
    const strength = start * (1 - progress);
    if (progress >= 1) {
      document.body.style.transform = "";
      clearInterval(shake);
      return;
    }
    const x = (Math.random() - 0.5) * 20 * strength;
    const y = (Math.random() - 0.5) * 20 * strength;
    document.body.style.transform = `translate(${x}px, ${y}px)`;
  }, 16);
}

function triggerScreenEffect(rarity) {
  if (rarity.name === "Luminous") {
    luminousCutscene();
    return;
  }
  
  if (rarity.name === "Abyssal") {
    abyssalCutscene();
    return;
  }
  
  if (rarity.name === "Apollo") {
    apolloCutscene();
    return;
  }

  const screen = document.getElementById("screen-effect");
  screen.className = "";
  void screen.offsetWidth;

  let cls = "effect-" + rarity.name.toLowerCase().replace(/\s+/g, "");
  screen.classList.add(cls);

  if (rarity.name === "Thunderous") { // CHECK ADDED
    lightningStrike();
  }

  screen.style.opacity = "1";
  setTimeout(() => { screen.style.opacity = "0"; }, 300);

  if (rarity.name === "Thunderous") { // CHECK ADDED
    shakeWindow();
  }
}

function spawnParticles(rarity) {
  if (!["Epic","Ultra Rare","Legendary","Mythic","Thunderous"].includes(rarity.name)) return;
  const container = document.getElementById("particle-container");
  for (let i = 0; i < 30; i++) {
    const p = document.createElement("div");
    p.className = "particle";
    p.style.left = Math.random() * window.innerWidth + "px";
    p.style.top = Math.random() * window.innerHeight + "px";
    p.style.backgroundColor = rarity.color;
    container.appendChild(p);
    setTimeout(() => p.remove(), 1200);
  }
}

// ---------- Luminous Cutscene ----------
async function luminousCutscene() {
  const overlay = document.createElement("div");
  overlay.id = "luminous-overlay";
  overlay.innerHTML = `
    <div class="luminous-gradient"></div>
    <h1 class="luminous-title">RNG Unlimited</h1>
    <div id="luminous-particles"></div>
  `;
  document.body.appendChild(overlay);

  const particleContainer = document.getElementById("luminous-particles");
  
  // 1. Particle Spawner Loop
  const particleInterval = setInterval(() => {
    const p = document.createElement("div");
    p.className = "luminous-particle";
    p.style.left = Math.random() * window.innerWidth + "px";
    p.style.top = (window.innerHeight + (Math.random() * 50)) + "px"; 
    p.style.animationDelay = `${Math.random() * 0.5}s`;
    particleContainer.appendChild(p);
  }, 100); 

  // 2. Wait for the main black screen phase (8 seconds)
  await new Promise(res => setTimeout(res, 8000));
  
  // STOP the particle spawning loop
  clearInterval(particleInterval);

  // 3. Start the slow fade to white (1 second)
  overlay.classList.add("fade-white");
  await new Promise(res => setTimeout(res, 1000));

  // 4. Start the heavy shake while the screen is fully white
  let intensity = 100;
  const start = Date.now();
  const dur = 800; // Duration of the intense shake
  (function shakeFrame() {
    const elapsed = Date.now() - start;
    if (elapsed >= dur) {
      document.body.style.transform = "";
      
      // Cleanup the cutscene elements after the shake
      setTimeout(() => overlay.remove(), 200);
      return;
    }
    const decay = 1 - elapsed / dur;
    const x = (Math.random() - 0.5) * intensity * decay;
    const y = (Math.random() - 0.5) * intensity * decay;
    document.body.style.transform = `translate(${x}px, ${y}px)`;
    requestAnimationFrame(shakeFrame);
  })();
}

// ---------- ABYSSAL CUTSCENE ----------
async function abyssalCutscene() {
  const overlay = document.createElement("div");
  overlay.id = "abyssal-overlay";
  overlay.innerHTML = `
    <div class="abyssal-gradient"></div>
    <h1 class="abyssal-title">RNG Unlimited</h1>
    <div id="abyssal-particles"></div>
  `;
  document.body.appendChild(overlay);

  const particleContainer = document.getElementById("abyssal-particles");
  
  // Start continuous particle spawning (Slower: 1 particle/150ms for more dispersed look)
  const particleInterval = setInterval(() => {
    const p = document.createElement("div");
    p.className = "abyssal-particle";
    
    // Spawn horizontally random
    p.style.left = `${randInt(0, window.innerWidth)}px`;
    
    // Start just off-screen at the bottom (+ small random offset)
    p.style.top = `${window.innerHeight + (Math.random() * 50)}px`; 
    
    // Longer animation delay for a wave-like staggered start
    p.style.animationDelay = `${Math.random() * 2}s`; 
    
    // Add random horizontal drift offset for aquatic feel
    p.style.setProperty('--drift-x', `${(Math.random() - 0.5) * 50}px`);
    
    particleContainer.appendChild(p);
  }, 150);

  // 1. Wait for the main dark screen phase (8 seconds)
  await new Promise(res => setTimeout(res, 8000));
  
  // STOP the particle spawning loop
  clearInterval(particleInterval);

  // 2. Start the slow fade to deep blue (1 second)
  overlay.classList.add("fade-blue");
  await new Promise(res => setTimeout(res, 1000));

  // 3. Start the heavy shake while the screen is fully blue
  let intensity = 120; // Slightly stronger shake
  const start = Date.now();
  const dur = 800; // Duration of the intense shake
  (function shakeFrame() {
    const elapsed = Date.now() - start;
    if (elapsed >= dur) {
      document.body.style.transform = "";
      
      // Cleanup the cutscene elements after the shake
      setTimeout(() => overlay.remove(), 200);
      return;
    }
    const decay = 1 - elapsed / dur;
    const x = (Math.random() - 0.5) * intensity * decay;
    const y = (Math.random() - 0.5) * intensity * decay;
    document.body.style.transform = `translate(${x}px, ${y}px)`;
    requestAnimationFrame(shakeFrame);
  })();
}

// ---------- APOLLO CUTSCENE ----------
async function apolloCutscene() {
  const overlay = document.createElement("div");
  overlay.id = "apollo-overlay";
  overlay.innerHTML = `
    <div class="apollo-gradient"></div>
    <h1 class="apollo-title">RNG Unlimited</h1>
    <div id="apollo-particles"></div>
  `;
  document.body.appendChild(overlay);

  const particleContainer = document.getElementById("apollo-particles");
  
  // Start continuous particle spawning (small, fast embers)
  const particleInterval = setInterval(() => {
    const p = document.createElement("div");
    p.className = "apollo-particle";
    
    // UPDATED: Spawn horizontally across the entire screen
    p.style.left = `${randInt(0, window.innerWidth)}px`; 
    
    // Start just off-screen at the bottom (+ small random offset)
    p.style.top = `${window.innerHeight + (Math.random() * 50)}px`; 
    
    // Stagger the movement start slightly
    p.style.animationDelay = `${Math.random() * 1}s`;
    
    particleContainer.appendChild(p);
  }, 50); // Faster spawn rate

  // 1. Wait for the main dark screen phase (8 seconds)
  await new Promise(res => setTimeout(res, 8000));
  
  // STOP the particle spawning loop
  clearInterval(particleInterval);

  // 2. Start the slow fade to bright orange (1 second)
  overlay.classList.add("fade-orange");
  await new Promise(res => setTimeout(res, 1000));

  // 3. Start the intense shake while the screen is fully orange/red
  let intensity = 130; // Very intense shake
  const start = Date.now();
  const dur = 800; // Duration of the intense shake
  (function shakeFrame() {
    const elapsed = Date.now() - start;
    if (elapsed >= dur) {
      document.body.style.transform = "";
      
      // Cleanup the cutscene elements after the shake
      setTimeout(() => overlay.remove(), 200);
      return;
    }
    const decay = 1 - elapsed / dur;
    const x = (Math.random() - 0.5) * intensity * decay;
    const y = (Math.random() - 0.5) * intensity * decay;
    document.body.style.transform = `translate(${x}px, ${y}px)`;
    requestAnimationFrame(shakeFrame);
  })();
}

// ---------- UI ----------
const display = document.getElementById("rarity-display");
const chanceDisplay = document.getElementById("chance-display");
const buttonsContainer = document.getElementById("buttons-container");

rarities.forEach(r => {
  const btn = document.createElement("button");
  btn.textContent = r.name;
  btn.onclick = () => {
    display.textContent = r.name;
    chanceDisplay.textContent = "1 in " + r.chance;
    triggerScreenEffect(r);
    spawnParticles(r);
  };
  buttonsContainer.appendChild(btn);
});
</script>

</body>
</html>